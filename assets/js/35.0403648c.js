(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{291:function(t,r,e){"use strict";e.r(r);var a=e(0),o=Object(a.a)({},(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"wireshark-抓包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wireshark-抓包"}},[t._v("#")]),t._v(" wireshark 抓包")]),t._v(" "),e("ol",[e("li",[t._v("window 下需要配置环境变量 "),e("code",[t._v("SSLKEYLOGFILE")]),t._v(" ，路径就是 log 文件所在的目录，")]),t._v(" "),e("li",[t._v("在"),e("code",[t._v("wireshark edit->preference->protocol->ssl")]),t._v(", 选择文件所在路径")]),t._v(" "),e("li",[t._v("把wireshark，浏览器关掉，使用命令行启动浏览器，以便于chrome或者firefox浏览器读取到上面环境变量")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("为了读取关键包，设置一下捕获规则， "),e("code",[t._v("tcp port 443")]),t._v(",打开一个使用了"),e("code",[t._v("http2")]),t._v("的网站，如（taobao.com）,接着设置过滤规则 http2，打开16进制面板上tab,切换解密，然后切换到解压缩，就可以看到http2 header部分数据")]),t._v(" "),e("li",[t._v("详细内容参照"),e("a",{attrs:{href:"https://jimshaver.net/2015/02/11/decrypting-tls-browser-traffic-with-wireshark-the-easy-way/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Decrypting TLS"),e("OutboundLink")],1),t._v(","),e("a",{attrs:{href:"https://imququ.com/post/http2-traffic-in-wireshark.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Wireshark 调试 HTTP/2 流量"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("实际上是不能解密数据部分的，第一个链接老外说可以，实际操作是不可行的，日志文件只是记录了随机数，又不知道最后的加密秘钥，为什么http2 的头部可以被解密，这是一个疑问的地方、")]),t._v(" "),e("li",[t._v("容易踩坑的地方，windows 用户按照这样的配置以后，什么环境变量都对的话，而且使用命令行启动浏览器，注意是火狐浏览器和谷歌浏览器，假如能在日志文件看到数据，接下来你需要在"),e("code",[t._v("wireshark")]),t._v("下面找到解密面板，这是最坑的，我是找了好久，想哭。")])])])}),[],!1,null,null,null);r.default=o.exports}}]);